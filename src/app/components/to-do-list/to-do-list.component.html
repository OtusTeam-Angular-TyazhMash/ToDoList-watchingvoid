<div class="todo-container">
  <div class="todo-header">Todo List</div>
  <div *ngIf="isLoading" class="loading-container">
    <app-loading-spinner></app-loading-spinner>
  </div>
  <mat-form-field>
    <mat-label>Status Filter</mat-label>
    <mat-select [(ngModel)]="filterStatus" (ngModelChange)="filterTodos($event)">
      <mat-option [value]="null">All</mat-option>
      <mat-option value="InProgress">In Progress</mat-option>
      <mat-option value="Completed">Completed</mat-option>
    </mat-select>
  </mat-form-field>
  <ul class="todo-list" *ngIf="!isLoading">
    <app-todo-list-item 
      *ngFor="let item of todos | filterTodos:filterStatus"
      [item]="item"
      (delete)="deleteTodo($event)"
      (toggle)="toggleCompletion($event)"
      (click)="selectItem(item.id)"
      appTooltip
    ></app-todo-list-item>
    <div class="description-area" *ngIf="selectedItemId !== null">
      {{ getSelectedItemDescription() }}
    </div>
  </ul>
  <app-todo-create-item 
    (add)="addTodo()"
    [(title)]="newTodoTitle"
    [(description)]="newItemDescription">
  </app-todo-create-item>
</div>
